{"version":3,"file":"linux.js","sourceRoot":"","sources":["../../src/toolsets/linux.ts"],"names":[],"mappings":"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","sourcesContent":["import { Arch } from \"builder-util\"\nimport * as path from \"path\"\nimport { downloadArtifact, getBinFromUrl } from \"../binDownload\"\n\n// It's just easier to copy the map of checksums here rather than adding them to within each if-statement. Also, easy copy-paste from the releases page\nconst fpmChecksums = {\n  \"fpm-1.17.0-ruby-3.4.3-darwin-arm64.7z\": \"0n3BG/Xz1T5YIsoNNTG1bBege9E8A7rym5e3mfzHSHbiSiTS44v6GIHW4amDQk1Y5dtKtWXVq7FwjdmAf3kmMg==\",\n  \"fpm-1.17.0-ruby-3.4.3-darwin-x86_64.7z\": \"wPX3UheBznIlAXduM22W/d27i+DZVIB/MYnY5eh/qLeEEASZqHJWgN+pIckz3jT0dP37g1SQCikXXfsgxtMSPA==\",\n  \"fpm-1.17.0-ruby-3.4.3-linux-amd64.7z\": \"7miGWr6dfJSzXDD9ALqkwxvGACp7s7GR50NPcU0YwzbJL825H1SLwGJSGME+v57BxDI2xac47gFEkRZf5u9EtA==\",\n  \"fpm-1.17.0-ruby-3.4.3-linux-arm64v8.7z\": \"moRNjg6Q2iSXpkrm5sGNL2F6KilGNPagbefxhtr3VEqvAUSg2k2pMLr5xXUo0L4rZ4V+uETbwmbDCpeO3pmLyQ==\",\n  \"fpm-1.17.0-ruby-3.4.3-linux-i386.7z\": \"UPzsXhkW2T7+oHSKgFsZsFUxxmPC9lNZHsQbT+OeoTbIGsb6+qf3m7c6uP0XvRFnJiu3MM3lE1xAWQOctvajWA==\",\n} as const\n\nexport function getLinuxToolsPath() {\n  return getBinFromUrl(\"linux-tools-mac-10.12.3\", \"linux-tools-mac-10.12.3.7z\", \"SQ8fqIRVXuQVWnVgaMTDWyf2TLAJjJYw3tRSqQJECmgF6qdM7Kogfa6KD49RbGzzMYIFca9Uw3MdsxzOPRWcYw==\")\n}\n\nexport async function getFpmPath() {\n  if (process.env.CUSTOM_FPM_PATH != null) {\n    return path.resolve(process.env.CUSTOM_FPM_PATH)\n  }\n  const exec = \"fpm\"\n  if (process.platform === \"win32\" || process.env.USE_SYSTEM_FPM === \"true\") {\n    return exec\n  }\n  const getKey = () => {\n    if (process.platform === \"linux\") {\n      if (process.arch == \"x64\") {\n        return \"fpm-1.17.0-ruby-3.4.3-linux-amd64.7z\"\n      } else if (process.arch === \"arm64\") {\n        return \"fpm-1.17.0-ruby-3.4.3-linux-arm64v8.7z\"\n      }\n      return \"fpm-1.17.0-ruby-3.4.3-linux-i386.7z\"\n    }\n    // darwin arm64\n    if (process.arch === \"arm64\") {\n      return \"fpm-1.17.0-ruby-3.4.3-darwin-arm64.7z\"\n    }\n    return \"fpm-1.17.0-ruby-3.4.3-darwin-x86_64.7z\"\n  }\n\n  const filename = getKey()\n  const fpmPath = await getBinFromUrl(\"fpm@2.1.4\", filename, fpmChecksums[filename])\n  return path.join(fpmPath, exec)\n}\n\nexport async function getAppImageTools(targetArch: Arch) {\n  const override = process.env.APPIMAGE_TOOLS_PATH?.trim()\n  const artifactPath =\n    override ||\n    (await downloadArtifact({\n      releaseName: \"appimage@1.0.2\",\n      filenameWithExt: \"appimage-tools-runtime-20251108.tar.gz\",\n      checksums: {\n        \"appimage-tools-runtime-20251108.tar.gz\": \"a784a8c26331ec2e945c23d6bdb14af5c9df27f5939825d84b8709c61dc81eb0\",\n      },\n      githubOrgRepo: \"electron-userland/electron-builder-binaries\",\n    }))\n\n  const runtimeArch = targetArch === Arch.armv7l ? \"arm32\" : targetArch === Arch.arm64 ? \"arm64\" : targetArch === Arch.ia32 ? \"ia32\" : \"x64\"\n  return {\n    mksquashfs: path.join(artifactPath, \"mksquashfs\"),\n    desktopFileValidate: path.join(artifactPath, \"desktop-file-validate\"),\n    runtime: path.join(artifactPath, \"runtimes\", `runtime-${runtimeArch}`),\n    runtimeLibraries: path.join(artifactPath, \"lib\", runtimeArch),\n  }\n}\n"]}